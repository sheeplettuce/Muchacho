@{
    ViewData["Title"] = "Dashboard";
    string displayName = "Usuario";
    if (User?.Identity?.IsAuthenticated ?? false)
    {
        var nameClaim = User.FindFirst(System.Security.Claims.ClaimTypes.Name)?.Value;
        var emailClaim = User.FindFirst(System.Security.Claims.ClaimTypes.Email)?.Value;
        var raw = nameClaim ?? emailClaim;
        if (!string.IsNullOrWhiteSpace(raw))
        {
            displayName = raw.Contains("@") ? raw.Substring(0, raw.IndexOf("@")) : raw;
        }
    }
}

<head>
    <link rel="stylesheet" href="~/css/dash.css" asp-append-version="true" />
</head>

<div class="container">
    <div class="text-center mb-5">
        <h1>Bienvenido a Muchacho</h1>
        <p class="lead">Hola, @displayName, este es tu espacio de trabajo, un catálogo de los álbumes en existencia en los almacénes de las tiendas Muchacho!</p>
        
    </div>

    <div class="row g-4">
        <div class="text-center mb-5">
            <div class="dashboard-card">
                <div class="card-icon">
                    <i class="bi bi-vinyl-fill"></i>
                </div>
                <h3>Inventario</h3>
                <p>Administra los álbumes en venta</p>
                <a asp-controller="Music" asp-action="Index" class="btn btn-primary">
                    Ver Álbumes
                </a>

            </div>

        </div>
        <div class="container">
            <div class="text-center mb-5">
                <img src="~/images/muchacho-solo.png"
                     alt="Muchacho Solo"
                     style="height:200px; margin: 20px 0; cursor: pointer;"
                     data-bs-toggle="modal"
                     data-bs-target="#chisteModal"
                     onmouseover="this.style.cursor='url(../images/Help.cur), pointer'" 
                     
                     />
                
                <p>¿Ya te vas?</p>
            </div>
        </div>


        <!-- Modal con un chiste -->

        <div class="modal fade" id="chisteModal" tabindex="-1" aria-labelledby="chisteModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content" style="background: rgba(25, 25, 25, 0.95); border: 2px solid #9f0e0e; border-radius: 15px;">
                    <div class="modal-header" style="border-bottom: 1px solid rgba(201, 169, 233, 0.2);">
                        <h5 class="modal-title" id="chisteModalLabel" style="color: #9f0e0e;">
                           easter egg
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body text-center" style="color: #e4e4e4; padding: 30px;">
                        <p style="font-size: 1.1rem; line-height: 1.8;">
                            Un amigo me preguntaba ¿Cómo es que mueren las estrellas?
                        </p>
                        <p>
                            Por sobredosis, respondí
                        </p>
                    </div>
                    <div class="modal-footer" style="border-top: 1px solid rgba(201, 169, 233, 0.2); justify-content: center;">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                onmouseover="this.style.cursor='url(../images/Help.cur), pointer'">
                            Cerrar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        

        

    <div class="text-center mt-5">
        <form asp-controller="Login" asp-action="Logout" method="post">
            @Html.AntiForgeryToken()
                <button type="submit" class="btn btn-danger" onmouseover="this.style.cursor='url(../images/Help.cur), pointer'">
               Cerrar Sesión
            </button>
        </form>
    </div>
</div>
</div>

